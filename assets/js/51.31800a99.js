(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{376:function(s,r,n){"use strict";n.r(r);var t=n(4),a=Object(t.a)({},(function(){var s=this,r=s._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("p",[s._v("cron来源于希腊单词chronos（意为“时间”）")]),s._v(" "),r("p",[s._v("这里指Linux系统下一个自动执行指定任务的程序（计划任务）")]),s._v(" "),r("h2",{attrs:{id:"_1-crontab命令选项"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-crontab命令选项"}},[s._v("#")]),s._v(" 1. crontab命令选项")]),s._v(" "),r("p",[s._v("代码如下:")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("#crontab -u <-l, -r, -e>\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("-u指定一个用户")]),s._v(" "),r("p",[s._v("-l列出某个用户的任务计划")]),s._v(" "),r("p",[s._v("-r删除某个用户的任务")]),s._v(" "),r("p",[s._v("-e编辑某个用户的任务")]),s._v(" "),r("h2",{attrs:{id:"_2-cron文件语法与写法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-cron文件语法与写法"}},[s._v("#")]),s._v(" 2. cron文件语法与写法")]),s._v(" "),r("p",[s._v("可用crontab -e命令来编辑")]),s._v(" "),r("p",[s._v("编辑的是/var/spool/cron下对应用户的cron文件")]),s._v(" "),r("p",[s._v("也可以直接修改/etc/crontab文件")]),s._v(" "),r("p",[s._v("具体格式如下：")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("Minute Hour Day Month Week command\n分钟 小时 天 月 星期 命令\n0-59 0-23 1-31 1-12 0-6 command\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("p",[s._v("每个字段代表的含义如下：")]),s._v(" "),r("ul",[r("li",[s._v("Minute 每个小时的第几分钟执行该任务")]),s._v(" "),r("li",[s._v("Hour 每天的第几个小时执行该任务")]),s._v(" "),r("li",[s._v("Day 每月的第几天执行该任务")]),s._v(" "),r("li",[s._v("Month 每年的第几个月执行该任务")]),s._v(" "),r("li",[s._v("DayOfWeek 每周的第几天执行该任务，0表示周日")]),s._v(" "),r("li",[s._v("Command 指定要执行的程序 、脚本或命令")])]),s._v(" "),r("p",[s._v("在这些字段里，除了“Command”是必须指定的字段以外，其它字段皆为可选")]),s._v(" "),r("p",[s._v("对于不指定的字段，要用“*”来填补其位置。")]),s._v(" "),r("h2",{attrs:{id:"_3-几个特殊符号的含义"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-几个特殊符号的含义"}},[s._v("#")]),s._v(" 3. 几个特殊符号的含义")]),s._v(" "),r("ul",[r("li",[s._v("“*”代表取值范围内的数字,")]),s._v(" "),r("li",[s._v("“/”代表”每”,")]),s._v(" "),r("li",[s._v("“-”代表从某个数字到某个数字,")]),s._v(" "),r("li",[s._v("“,”分开几个离散的数字")])]),s._v(" "),r("h2",{attrs:{id:"_4-关于cron配置文件-etc-crontab"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-关于cron配置文件-etc-crontab"}},[s._v("#")]),s._v(" 4. 关于cron配置文件/etc/crontab")]),s._v(" "),r("p",[s._v("cron 的主配置文件是 /etc/crontab，它包括下面几行：")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("SHELL=/bin/bash\nPATH=/sbin:/bin:/usr/sbin:/usr/bin\nMAILTO=root\nHOME=/\n# run-parts\n01 * * * * root run-parts /etc/cron.hourly\n02 4 * * * root run-parts /etc/cron.daily\n22 4 * * 0 root run-parts /etc/cron.weekly\n42 4 1 * * root run-parts /etc/cron.monthly\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br")])]),r("p",[s._v("前四行是用来配置 cron 任务运行环境的变量：")]),s._v(" "),r("p",[s._v("SHELL 变量的值指定shell 环境（此处默认为 bash shell）")]),s._v(" "),r("p",[s._v("PATH 变量定义用来执行命令的程序路径")]),s._v(" "),r("p",[s._v('cron 任务的输出被邮寄给 MAILTO 变量定义的用户名，如果 MAILTO 变量被定义为空白字符串（MAILTO=""），电子邮件就不会被寄出')]),s._v(" "),r("p",[s._v("HOME 变量可以用来设置在执行命令或脚本时使用的主目录。")]),s._v(" "),r("p",[s._v("如在 /etc/crontab 文件中run-parts部分所示")]),s._v(" "),r("p",[s._v("它使用 run-parts 脚本来执行存在于 /etc/cron.hourly、/etc/cron.daily、/etc/cron.weekly 和 /etc/cron.monthly 目录中的脚本，这些脚本被相应地按照预设时间在每小时、每日、每周、或每月执行。这些目录中的文件应该是 shell 脚本，并且具有可执行权限(chmod +x filename)。")]),s._v(" "),r("p",[s._v("如果某 cron 任务需要根据调度来执行，而不是每小时、每日、每周、或每月地执行，它可以被添加到/etc/cron.d目录中。该目录中的所有文件使用和 /etc/crontab 中一样的语法。")]),s._v(" "),r("p",[s._v("每次编辑完某个用户的cron设置后，cron自动在/var/spool/cron下生成一个与此用户同名的文件，此用户的cron信息都记录在这个文件中，这个文件是不可以直接编辑的，只可以用crontab -e 来编辑。")]),s._v(" "),r("p",[s._v("cron启动后每过一份钟读一次这个文件，检查是否要执行里面的命令。因此此文件修改后不需要重新启动cron服务。")]),s._v(" "),r("h2",{attrs:{id:"_5-常见cron示例参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-常见cron示例参考"}},[s._v("#")]),s._v(" 5. 常见cron示例参考")]),s._v(" "),r("ul",[r("li",[s._v("5  * * * * ls 指定每小时的第5分钟执行一次ls命令")]),s._v(" "),r("li",[s._v("30 5 * * * ls 指定每天的 5:30 执行ls命令")]),s._v(" "),r("li",[s._v("30 7 8 * * ls 指定每月8号的7：30分执行ls命令")]),s._v(" "),r("li",[s._v("30 5 8 6 * ls 指定每年的6月8日5：30执行ls命令")]),s._v(" "),r("li",[s._v("30 6 * * 0 ls 指定每星期日的6:30执行ls命令[注：0表示星期天，1表示星期1，以此类推，也可以用英文来表示，sun表示星期天，mon表示星期一等。]\n30 3 10,20 * * ls 每月10号及20号的3：30执行ls命令[注：“，”用来连接多个不连续的时段]")]),s._v(" "),r("li",[s._v("25 8-11 * * * ls 每天8-11点的第25分钟执行ls命令[注：“-”用来连接连续的时段]")]),s._v(" "),r("li",[s._v("*/15 * * * * ls 每15分钟执行一次ls命令 [即每个小时的第0 15 30 45 60分钟执行ls命令 ]")]),s._v(" "),r("li",[s._v("30 6 */10 * * ls 每个月中，每隔10天6:30执行一次ls命令[即每月的1、11、21、31日是的6：30执行一次ls命令 ]\n每天7：50以root 身份执行/etc/cron.daily目录中的所有可执行文件")]),s._v(" "),r("li",[s._v("50 7 * *  * root run-parts  /etc/cron.daily [ 注：run-parts参数表示，执行后面目录中的所有可执行文件\n第10、20、30分钟输出到/tmp/cron1.txt：")]),s._v(" "),r("li",[s._v('10,20,30 * * * * echo "第10、20、30分钟输出一次" >> /tmp/cron1.txt\n以用户root的身份每两小时就运行某个程序：')]),s._v(" "),r("li",[s._v("0 */2 * * * root /usr/bin/somecommand >> /dev/null 2>&1")])]),s._v(" "),r("h2",{attrs:{id:"_6-特别提示"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-特别提示"}},[s._v("#")]),s._v(" 6. 特别提示")]),s._v(" "),r("p",[s._v("A、cron配置文件路径")]),s._v(" "),r("p",[s._v("#vi /etc/crontab\nB、重启cron的方法")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("#/etc/rc.d/init.d/crond restart\nUsage: /etc/rc.d/init.d/crond {start|stop|status|reload|restart|condrestart}\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("C、别忘了将脚本改成可执行")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("chmod +x filename\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])])])}),[],!1,null,null,null);r.default=a.exports}}]);